angular.module("AngularStomp",[]).factory("ngstomp",["$rootScope","$log",function(t,n){var o=function(t,o,s){this.stompClient=o?Stomp.over(new o(t)):Stomp.client(t),this.stompClient.debug=s?n.debug:function(){},this.connections=[]};return o.prototype.subscribe=function(n,o){var s=this.stompClient.subscribe(n,function(){o.apply(this.stompClient,arguments),t.$$phase||t.$apply()});this.connections.push({url:n,subscription:s})},o.prototype.unsubscribe=function(t){for(var n=!1,o=0,s=this.connections.length;s>o;o++)this.connections[o].url===t&&(n=o,this.connections[o].subscription.unsubscribe());n!==!1&&this.connections.splice(n,1)},o.prototype.send=function(t,n,o){this.stompClient.send(t,n,o)},o.prototype.connect=function(n,o,s,i,e){var p=this;this.stompClient.connect(n,o,function(){s.apply(p.stompClient,arguments),t.$$phase||t.$apply()},function(){i.apply(p.stompClient,arguments),t.$$phase||t.$apply()},e)},o.prototype.disconnect=function(n){var o=this;this.stompClient.disconnect(function(){n.apply(o.stompClient,arguments),t.$$phase||t.$apply()})},function(t,n,s){return new o(t,n,s)}}]);