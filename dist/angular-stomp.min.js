/*! AngularStompDK v0.2.4 */
!function(){"use strict";var t=function(){function t(t,n){for(var i in n){var s=n[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,n)}return function(n,i,s){return i&&t(n.prototype,i),s&&t(n,s),n}}(),n=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},i=function(){function i(){n(this,i),this.settings={}}return t(i,{credential:{value:function(t,n){return this.settings.login=t,this.settings.password=n,this}},url:{value:function(t){var n=function(n){return t.apply(this,arguments)};return n.toString=function(){return t.toString()},n}(function(t){return this.settings.url=t,this})},"class":{value:function(t){return this.settings["class"]=t,this}},setting:{value:function(t){return this.settings=t,this}},debug:{value:function(t){return this.settings.debug=t,this}},vhost:{value:function(t){return this.settings.vhost=t,this}},$get:{value:["$q","$log","$rootScope","Stomp",function(t,n,i,e){return new s(this.settings,t,n,i,e)}]}}),i}(),s=function(){function i(t,s,e,o,r){n(this,i),this.settings=t,this.$q=s,this.$rootScope=o,this.stompClient=t["class"]?r.over(new t["class"](t.url)):r.client(t.url),this.stompClient.debug=t.debug?e.debug:function(){},this.connections=[],this.deferred=this.$q.defer(),this.promiseResult=this.deferred.promise,this.connect()}return t(i,{connect:{value:function(){var t=this;return this.stompClient.connect(this.settings.login,this.settings.password,function(){t.deferred.resolve(),t.$digestStompAction()},function(){t.deferred.reject(),t.$digestStompAction()},this.settings.vhost),this.promiseResult}},subscribe:{value:function(t,n,i){var s=this;return this.promiseResult.then(function(){s.$stompSubscribe(t,n),s.unRegisterScopeOnDestroy(i,t)}),this}},unsubscribe:{value:function(t){var n=this;return this.promiseResult.then(function(){return n.$stompUnSubscribe(t)}),this}},send:{value:function(t,n,i){var s=this,e=this.$q.defer();return this.promiseResult.then(function(){s.stompClient.send(t,i||{},JSON.stringify(n)),e.resolve()}),e.promise}},disconnect:{value:function(){var t=this,n=this.$q.defer();return this.stompClient.disconnect(function(){n.resolve(),t.$digestStompAction()}),n.promise}},$stompSubscribe:{value:function(t,n){var i=this,s=i.stompClient.subscribe(t,function(){n.apply(i.stompClient,arguments),i.$digestStompAction()});this.connections.push({url:t,subscription:s})}},$stompUnSubscribe:{value:function(t){for(var n=!1,i=0,s=this.connections.length;s>i;i++)if(this.connections[i].url===t){n=i,this.connections[i].subscription.unsubscribe();break}n!==!1&&this.connections.splice(n,1)}},$digestStompAction:{value:function(){!this.$rootScope.$$phase&&this.$rootScope.$apply()}},unRegisterScopeOnDestroy:{value:function(t,n){var i=this;void 0!==t&&angular.isFunction(t.$on)&&t.$on("$destroy",function(){return i.unsubscribe(n)})}}}),i}();angular.module("AngularStompDK",[]).provider("ngstomp",i).constant("Stomp",window.Stomp)}();
//# sourceMappingURL=angular-stomp.min.js.map