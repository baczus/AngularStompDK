!function(){"use strict";angular.module("AngularStompDK",[]).factory("ngstompinternal",["$rootScope","$log",function(n,t){var s=function(n,s,i){this.stompClient=s?Stomp.over(new s(n)):Stomp.client(n),this.stompClient.debug=i?t.debug:function(){},this.connections=[]};return s.prototype.subscribe=function(t,s){var i=this.stompClient.subscribe(t,function(){s.apply(this.stompClient,arguments),n.$$phase||n.$apply()});this.connections.push({url:t,subscription:i})},s.prototype.unsubscribe=function(n){for(var t=!1,s=0,i=this.connections.length;i>s;s++)this.connections[s].url===n&&(t=s,this.connections[s].subscription.unsubscribe());t!==!1&&this.connections.splice(t,1)},s.prototype.send=function(n,t,s){this.stompClient.send(n,t,s)},s.prototype.connect=function(t,s,i,o,e){var c=this;this.stompClient.connect(t,s,function(){i.apply(c.stompClient,arguments),n.$$phase||n.$apply()},function(){o.apply(c.stompClient,arguments),n.$$phase||n.$apply()},e)},s.prototype.disconnect=function(t){var s=this;this.stompClient.disconnect(function(){t.apply(s.stompClient,arguments),n.$$phase||n.$apply()})},function(n,t,i){return new s(n,t,i)}}]).provider("ngstomp",function(){function n(n,t,s){var i=this,o=t(n.url,n.class),e=s.defer(),c=e.promise;i.connect=function(){return o.connect(n.login,n.password,function(){i.isConnected=!0,e.resolve()}),c},i.subscribe=function(n,t,s){return c.then(function(){o.subscribe(n,t),void 0!==s&&s.$on("$destroy",function(){i.unsubscribe(n)})}),i},i.unsubscribe=function(n,t){return c.then(function(){o.unsubscribe(n,t)}),i},i.connect()}var t={};this.credential=function(n,s){return t.login=n,t.password=s,this},this.url=function(n){return t.url=n,this},this.class=function(n){return t.class=n,this},this.settings=function(n){return t=n,this},this.$get=["ngstompinternal","$q",function(s,i){return new n(t,s,i)}]})}();